{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/H%20P/Desktop/SAFarmHouse/lib/mongodb.ts"],"sourcesContent":["\r\nimport { MongoClient } from 'mongodb';\r\n\r\n// Replace the URI below with your actual MongoDB Atlas connection string\r\nconst uri = process.env.MONGODB_URI;\r\n\r\nif (!uri) {\r\n  throw new Error('Please add your MongoDB URI to .env.local as MONGODB_URI');\r\n}\r\n\r\nlet client: MongoClient;\r\nlet clientPromise: Promise<MongoClient>;\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  if (!(global as any)._mongoClientPromise) {\r\n    client = new MongoClient(uri);\r\n    (global as any)._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = (global as any)._mongoClientPromise;\r\n} else {\r\n  client = new MongoClient(uri);\r\n  clientPromise = client.connect();\r\n}\r\n\r\nexport default clientPromise;\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,yEAAyE;AACzE,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AAEnC,IAAI,CAAC,KAAK;IACR,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,IAAI,CAAC,yDAAgB,mBAAmB,EAAE;QACxC,SAAS,IAAI,oKAAW,CAAC;QACzB,yDAAgB,mBAAmB,GAAG,OAAO,OAAO;IACtD;IACA,gBAAgB,yDAAgB,mBAAmB;AACrD;;uCAKe"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/H%20P/Desktop/SAFarmHouse/app/api/dealers/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { ObjectId } from 'mongodb';\r\nimport clientPromise from '../../../lib/mongodb';\r\n\r\nconst DB_NAME = \"farmshop\";\r\nconst COLLECTION_NAME = \"dealers\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const client = await clientPromise;\r\n    const db = client.db(DB_NAME);\r\n    const dealers = await db.collection(COLLECTION_NAME)\r\n      .find({})\r\n      .sort({ name: 1 })\r\n      .toArray();\r\n\r\n    return NextResponse.json(dealers.map(d => ({\r\n      id: d._id.toString(),\r\n      name: d.name,\r\n      createdAt: d.createdAt\r\n    })));\r\n  } catch (e) {\r\n    console.error(e);\r\n    return NextResponse.json({ error: 'Failed to fetch dealers' }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const body = await request.json();\r\n    const client = await clientPromise;\r\n    const db = client.db(DB_NAME);\r\n\r\n    const newDealer = {\r\n      name: body.name,\r\n      createdAt: Date.now()\r\n    };\r\n\r\n    const result = await db.collection(COLLECTION_NAME).insertOne(newDealer);\r\n\r\n    return NextResponse.json({\r\n      id: result.insertedId.toString(),\r\n      name: newDealer.name,\r\n      createdAt: newDealer.createdAt\r\n    });\r\n  } catch (e) {\r\n    console.error(e);\r\n    return NextResponse.json({ error: 'Failed to add dealer' }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function PUT(request: Request) {\r\n  try {\r\n    const body = await request.json();\r\n    const { id, name } = body;\r\n    const client = await clientPromise;\r\n    const db = client.db(DB_NAME);\r\n\r\n    let objectId;\r\n    try {\r\n      objectId = new ObjectId(id);\r\n    } catch (e) {\r\n      return NextResponse.json({ error: 'Invalid dealer ID' }, { status: 400 });\r\n    }\r\n\r\n    const result = await db.collection(COLLECTION_NAME).updateOne(\r\n      { _id: objectId },\r\n      { $set: { name } }\r\n    );\r\n\r\n    if (result.matchedCount === 0) {\r\n      return NextResponse.json({ error: 'Dealer not found' }, { status: 404 });\r\n    }\r\n\r\n    return NextResponse.json({ success: true });\r\n  } catch (e) {\r\n    console.error(e);\r\n    return NextResponse.json({ error: 'Failed to update dealer' }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,UAAU;AAChB,MAAM,kBAAkB;AAEjB,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,UAAU,MAAM,GAAG,UAAU,CAAC,iBACjC,IAAI,CAAC,CAAC,GACN,IAAI,CAAC;YAAE,MAAM;QAAE,GACf,OAAO;QAEV,OAAO,gJAAY,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA,IAAK,CAAC;gBACzC,IAAI,EAAE,GAAG,CAAC,QAAQ;gBAClB,MAAM,EAAE,IAAI;gBACZ,WAAW,EAAE,SAAS;YACxB,CAAC;IACH,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,MAAM,YAAY;YAChB,MAAM,KAAK,IAAI;YACf,WAAW,KAAK,GAAG;QACrB;QAEA,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,iBAAiB,SAAS,CAAC;QAE9D,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,IAAI,OAAO,UAAU,CAAC,QAAQ;YAC9B,MAAM,UAAU,IAAI;YACpB,WAAW,UAAU,SAAS;QAChC;IACF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG;QACrB,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,IAAI;QACJ,IAAI;YACF,WAAW,IAAI,iKAAQ,CAAC;QAC1B,EAAE,OAAO,GAAG;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,iBAAiB,SAAS,CAC3D;YAAE,KAAK;QAAS,GAChB;YAAE,MAAM;gBAAE;YAAK;QAAE;QAGnB,IAAI,OAAO,YAAY,KAAK,GAAG;YAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF"}}]
}